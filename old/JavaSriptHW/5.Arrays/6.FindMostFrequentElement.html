<html>
	<head>
	<title>6.FindMostFrequentElement</title>	
	<style>
			body{
				max-width:90%;
			}
			h2{
				display:block;
				
			}
			input {
				min-width:50px;
			}
			a{
				color:black;
				display:block;
				background:skyblue;
				max-width:150px;
				text-decoration:none;
				border-radius:5px;
				text-align:center;
				
			}
			a:hover{
				-moz-box-shadow: 	0px 2px 5px #888;
				-webkit-box-shadow: 0px 2px 5px #888;
				box-shadow: 		0px 2px 5px #888;
			}
			a:active
			{
				-moz-box-shadow: 	none;
				-webkit-box-shadow: none;
				box-shadow: 		none;
				color:#555;	
			}			
	</style>
	</head>
	<body>
	<h2>
		Write a program that finds the most frequent number in an array. Example:
		{4, 1, 1, 4, 2, 3, 4, 4, 1, 2, 4, 9, 3} > 4 (5 times)
	</h2>
	<form>	
		<p>Write the numbers elements separated by comma(or .;:) 5,7,5,7,2,7,-56,5,5,65,5 6 7 8,7 </p>
		<label for = "sequence">Array:</label>
		<input id = "sequence" />					
		<a href = "#" onclick = "findMostFrequentElement()">Find Most Frequent Element</a>
	</form>
	<div id="console"></div>
	<script src = "scripts/js-console.js"></script>
	<script>
	function findMostFrequentElement(){
		var sequence = jsConsole.read("#sequence");
		var numbers = new Array();
		var numberArranged = new Array();
		var i,y;		
		
		//replaca all nonword characters with
		sequence = sequence.replace(/[,\.\s;:]/g,",");			
		
		//split String "sequence" and filter it by Number
		numbers = sequence.split(",").filter(Number);
		//sort the numbers array and then use it to find the most common element
		numberArranged = numbers.sort(orderNumbers);
		
		jsConsole.writeLine(numberArranged.join(','));
		
		
		if(sequence.length === 0)
		{
			jsConsole.writeLine("Empty numbers");
		}
		else
		{				
			jsConsole.writeLine(findSequence(numberArranged));			
		}	
	}
	
	//returns the most common element and how many times it repeats 
	function findSequence(orderedArray){
		
		var array = orderedArray;	
		var i,startPoint,maxElement;
		var counter = new Number(),maxSequence = new Number();
		counter = 1;
		maxSequence = 0;
		
		for(i = 1,startPoint = 0;i < array.length;i++)			
		{	
			if(array[i] === array[startPoint])
			{
				counter++;
				
			}
			else{
				counter = 1;
				startPoint = i;	
			}
			
			if(counter > maxSequence)
			{
				maxElement = array[startPoint];			
				maxSequence = counter;										
			}
		}

		return new Array(maxElement,maxSequence);
	}
	
	//gives the index of the smallest
	function orderNumbers(a,b){
		var result = 0;
		
		if (Number(a) < Number(b))
		{
			result = -1;
		}
		else{
			result = 1;
		}
		
		return result;
	}
	</script>
	</body>

 </html>